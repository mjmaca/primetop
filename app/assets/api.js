/* eslint-disable */
!function(){var t="https://export.dhtmlx.com/gantt",e=["leftside_text","rightside_text","task_text","progress_text","task_class"];function a(t,e,a){gantt.env.isIE?(gantt.env.isIE=!1,gantt.ajax.post(t,e,a),gantt.env.isIE=!0):gantt.ajax.post(t,e,a)}function r(t,e){for(var a in e)t[a]||(t[a]=e[a]);return t}function n(n){var i={};function s(t){if(!e){var e=document.createElement("DIV");e.style.cssText="position:absolute; display:none;",document.body.appendChild(e)}return i[t]?i[t]:(e.className=t,i[t]=c(e,"color")+";"+c(e,"backgroundColor"))}n._getWorktimeSettings=function(){var t,e={hours:[0,24],dates:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0}};if(n.config.work_time){var a=n._working_time_helper;t=a&&a.get_calendar?a.get_calendar():a?{hours:a.hours,dates:a.dates}:n.config.worktimes&&n.config.worktimes.global?{hours:n.config.worktimes.global.hours,dates:n.config.worktimes.global.dates}:e}else t=e;return t},n.exportToPDF=function(t){t&&t.raw?t=r(t,{name:"gantt.pdf",data:this._serialize_html()}):(t=r(t||{},{name:"gantt.pdf",data:this._serialize_all(),config:this.config}),p(n,t.config.columns)),t.version=this.version,this._send_to_export(t,"pdf")},n.exportToPNG=function(t){t&&t.raw?t=r(t,{name:"gantt.png",data:this._serialize_html()}):(t=r(t||{},{name:"gantt.png",data:this._serialize_all(),config:this.config}),p(n,t.config.columns)),t.version=this.version,this._send_to_export(t,"png")},n.exportToICal=function(t){t=r(t||{},{name:"gantt.ical",data:this._serialize_plain().data,version:this.version}),this._send_to_export(t,"ical")},n.exportToExcel=function(t){var e,a,n,i,s,o;if((t=t||{}).start||t.end){n=this.getState(),a=[this.config.start_date,this.config.end_date],i=this.getScrollState();var d=this.date.str_to_date(this.config.date_format);e=this.eachTask,t.start&&(this.config.start_date=d(t.start)),t.end&&(this.config.end_date=d(t.end)),this.render(),this.eachTask=(s=this.config.start_date,o=this.config.end_date,function(t,e,a){e=e||this.config.root_id,a=a||this;var r=this.getChildren(e);if(r)for(var n=0;n<r.length;n++){var i=this._pull[r[n]];(!s||i.end_date>s)&&(!o||i.start_date<o)&&t.call(a,i),this.hasChild(i.id)&&this.eachTask(t,i.id,a)}})}this._no_progress_colors="base-colors"===t.visual,(t=r(t,{name:"gantt.xlsx",title:"Tasks",data:this._serialize_table(t).data,columns:this._serialize_columns({rawDates:!0}),version:this.version})).visual&&(t.scales=this._serialize_scales(t)),this._send_to_export(t,"excel"),(t.start||t.end)&&(this.config.start_date=n.min_date,this.config.end_date=n.max_date,this.eachTask=e,this.render(),this.scrollTo(i.x,i.y),this.config.start_date=a[0],this.config.end_date=a[1])},n.exportToJSON=function(t){t=r(t||{},{name:"gantt.json",data:this._serialize_all(),config:this.config,columns:this._serialize_columns(),worktime:n._getWorktimeSettings(),version:this.version}),this._send_to_export(t,"json")},n.importFromExcel=function(e){var a=e.data;if(a instanceof FormData);else if(a instanceof File){var r=new FormData;r.append("file",a),e.data=r}!function(e){var a=e.server||t,r=e.store||0,n=e.data,i=e.callback;n.append("type","excel-parse"),n.append("data",JSON.stringify({sheet:e.sheet||0})),r&&n.append("store",r);var s=new XMLHttpRequest;s.onreadystatechange=function(t){4==s.readyState&&0==s.status&&i&&i(null)},s.onload=function(){var t=null;if(!(s.status>400))try{t=JSON.parse(s.responseText)}catch(t){}i&&i(t)},s.open("POST",a,!0),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.send(n)}(e)},n._msp_config=function(t){if(t.project)for(var e in t.project)t._custom_data||(t._custom_data={}),t._custom_data[e]=t.project[e](this.config);if(t.tasks)for(var a=0;a<t.data.length;a++){var r=this.getTask(t.data[a].id);for(var e in r._custom_data||(r._custom_data={}),t.tasks)r._custom_data[e]=t.tasks[e](r,this.config)}delete t.project,delete t.tasks,t.time=n._getWorktimeSettings();var i=this.getSubtaskDates(),s=this.date.date_to_str("%d-%m-%Y %H:%i:%s");t.start_end={start_date:s(i.start_date),end_date:s(i.end_date)}},n._msp_data=function(){var t=this.templates.xml_format,e=this.templates.format_date;this.templates.xml_format=this.date.date_to_str("%d-%m-%Y %H:%i:%s"),this.templates.format_date=this.date.date_to_str("%d-%m-%Y %H:%i:%s");var a=this._serialize_all();return this.templates.xml_format=t,this.templates.format_date=e,a},n._ajax_to_export=function(e,r,n){delete e.callback;a(e.server||t,"type="+r+"&store=1&data="+encodeURIComponent(JSON.stringify(e)),function(t){var e=t.xmlDoc||t,a=null;if(!(e.status>400))try{a=JSON.parse(e.responseText)}catch(t){}n(a)})},n._send_to_export=function(e,a){var r=this.date.date_to_str(this.config.date_format||this.config.xml_date);if(e.config&&(e.config=this.copy(e.config),function(t){var e=t.config.columns;if(e)for(var a=0;a<e.length;a++)e[a].template&&(e[a].$template=!0)}(e),e.config.start_date&&e.config.end_date&&(e.config.start_date instanceof Date&&(e.config.start_date=r(e.config.start_date)),e.config.end_date instanceof Date&&(e.config.end_date=r(e.config.end_date)))),e.callback)return n._ajax_to_export(e,a,e.callback);var i=this._create_hidden_form();i.firstChild.action=e.server||t,i.firstChild.childNodes[0].value=JSON.stringify(e),i.firstChild.childNodes[1].value=a,i.firstChild.submit()},n._create_hidden_form=function(){if(!this._hidden_export_form){var t=this._hidden_export_form=document.createElement("div");t.style.display="none",t.innerHTML="<form method='POST' target='_blank'><textarea name='data' style='width:0px; height:0px;' readonly='true'></textarea><input type='hidden' name='type' value=''></form>",document.body.appendChild(t)}return this._hidden_export_form};var o=n.json._copyObject;function d(t){var e={};for(var a in t)"$"!=a.charAt(0)&&(e[a]=t[a]);var r=n.templates.xml_format||n.templates.format_date;return e.start_date=r(e.start_date),e.end_date&&(e.end_date=r(e.end_date)),e}function l(t){var e=n.templates.task_text(t.start_date,t.end_date,t),a=d(t);return a.text=e||a.text,a}function c(t,e){var a=t.currentStyle?t.currentStyle[e]:getComputedStyle(t,null)[e],r=a.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+)/i);return(r&&4===r.length?("0"+parseInt(r[1],10).toString(16)).slice(-2)+("0"+parseInt(r[2],10).toString(16)).slice(-2)+("0"+parseInt(r[3],10).toString(16)).slice(-2):a).replace("#","")}var _=n.date.date_to_str("%Y-%m-%dT%H:%i:%s.000Z");function f(t){var e=u(t,l(t));e.start_date&&(e.start_date=_(t.start_date)),e.end_date&&(e.end_date=_(t.end_date));var a=n._day_index_by_date?n._day_index_by_date:n.columnIndexByDate;e.$start=a.call(n,t.start_date),e.$end=a.call(n,t.end_date),e.$level=t.$level,e.$type=t.$rendered_type;var r=n.templates;return e.$text=r.task_text(t.start,t.end_date,t),e.$left=r.leftside_text?r.leftside_text(t.start,t.end_date,t):"",e.$right=r.rightside_text?r.rightside_text(t.start,t.end_date,t):"",e}function g(t){var e=f(t),a=n.getTaskNode(t.id);if(a&&a.firstChild){var r=c(n._no_progress_colors?a:a.firstChild,"backgroundColor");"363636"==r&&(r=c(a,"backgroundColor")),e.$color=r}else t.color&&(e.$color=t.color);return e}function u(t,e){for(var a=0;a<n.config.columns.length;a++){var r=n.config.columns[a].template;if(r){var i=r(t);i instanceof Date&&(i=n.templates.date_grid(i,t)),e["_"+a]=i}}return e}function m(t){for(var a=d(t),r=0;r<e.length;r++){var i=n.templates[e[r]];i&&(a["$"+r]=i(t.start_date,t.end_date,t))}return u(t,a),a.open=t.$open,a}function p(t,e){for(var a=0;a<e.length;a++)e[a].label=e[a].label||t.locale.labels["column_"+e[a].name],"string"==typeof e[a].width&&(e[a].width=1*e[a].width)}function h(){if(n._scale_helpers){var t=n._get_scales(),e=n.config.min_column_width,a=n._get_resize_options().x?Math.max(n.config.autosize_min_width,0):config.$task.offsetWidth,r=config.config.scale_height-1;return n._scale_helpers.prepareConfigs(t,e,a,r)}var i=n.$ui.getView("timeline");if(i){var s=i.$config.width;"x"!=n.config.autosize&&"xy"!=n.config.autosize||(s=Math.max(n.config.autosize_min_width,0));var o=n.getState(),d=(t=i._getScales(),e=n.config.min_column_width,r=n.config.scale_height-1,n.config.rtl);return i.$scaleHelper.prepareConfigs(t,e,s,r,o.min_date,o.max_date,d)}}function v(){n.exportMode=!0;var t=n.serialize();return n.exportMode=!1,t}n._serialize_html=function(){var t=n.config.smart_scales,e=n.config.smart_rendering;(t||e)&&(n.config.smart_rendering=!1,n.config.smart_scales=!1,n.render());var a=this.$container.parentNode.innerHTML;return(t||e)&&(n.config.smart_scales=t,n.config.smart_rendering=e,n.render()),a},n._serialize_all=function(){n.json._copyObject=m;var t=v();return n.json._copyObject=o,t},n._serialize_plain=function(){var t=n.templates.xml_format,e=n.templates.format_date;n.templates.xml_format=n.date.date_to_str("%Y%m%dT%H%i%s",!0),n.templates.format_date=n.date.date_to_str("%Y%m%dT%H%i%s",!0),n.json._copyObject=l;var a=v();return n.templates.xml_format=t,n.templates.format_date=e,n.json._copyObject=o,delete a.links,a},n._serialize_table=function(t){n.json._copyObject=t.visual?g:f;var e=v();if(n.json._copyObject=o,delete e.links,t.cellColors){var a=this.templates.timeline_cell_class||this.templates.task_cell_class;if(a){for(var r=h(),i=r[0].trace_x,d=1;d<r.length;d++)r[d].trace_x.length>i.length&&(i=r[d].trace_x);for(d=0;d<e.data.length;d++){e.data[d].styles=[];for(var l=this.getTask(e.data[d].id),c=0;c<i.length;c++){var _=a(l,i[c]);_&&e.data[d].styles.push({index:c,styles:s(_)})}}}}return e},n._serialize_scales=function(t){for(var e=[],a=h(),r=1/0,i=0,o=0;o<a.length;o++)r=Math.min(r,a[o].col_width);for(o=0;o<a.length;o++){var d=0,l=0,c=[];e.push(c);var _=a[o];i=Math.max(i,_.trace_x.length);for(var f=_.format||_.template||(_.date?n.date.date_to_str(_.date):n.config.date_scale),g=0;g<_.trace_x.length;g++){var u=_.trace_x[g];l=d+Math.round(_.width[g]/r);var m={text:f(u),start:d,end:l};if(t.cellColors){var p=_.css||this.templates.scale_cell_class;if(p){var v=p(u);v&&(m.styles=s(v))}}c.push(m),d=l}}return{width:i,height:e.length,data:e}},n._serialize_columns=function(t){n.exportMode=!0;for(var e=[],a=n.config.columns,r=0,i=0;i<a.length;i++)"add"!=a[i].name&&"buttons"!=a[i].name&&(e[r]={id:a[i].template?"_"+i:a[i].name,header:a[i].label||n.locale.labels["column_"+a[i].name],width:a[i].width?Math.floor(a[i].width/4):""},"duration"==a[i].name&&(e[r].type="number"),"start_date"!=a[i].name&&"end_date"!=a[i].name||(e[r].type="date",t&&t.rawDates&&(e[r].id=a[i].name)),r++);return n.exportMode=!1,e}}gantt.ajax||(window.dhtmlxAjax?gantt.ajax=window.dhtmlxAjax:window.dhx4&&(gantt.ajax=window.dhx4.ajax)),n(gantt),window.Gantt&&Gantt.plugin&&Gantt.plugin(n)}(),function(){var t="https://export.dhtmlx.com/gantt";function e(t){!function(t){for(var e=0;e<t.length;e++){0==t[e].parent&&(t[e]._lvl=1);for(var a=e+1;a<t.length;a++)t[e].id==t[a].parent&&(t[a]._lvl=t[e]._lvl+1)}}(t.data);for(var e={},r=0;r<t.data.length;r++)e[t.data[r].id]=t.data[r];var s={};for(r=0;r<t.links.length;r++){var o=t.links[r];gantt.isTaskExists(o.source)&&gantt.isTaskExists(o.target)&&(s[o.id]=o)}for(r in s)n(s[r],e);var d={};for(r in e)a(e[r],s,e,{},d,null);for(r in s)i(s,e);for(r=0;r<t.links.length;r++)s[t.links[r].id]||(t.links.splice(r,1),r--);!function(t){for(var e=0;e<t.length;e++)delete t[e]._lvl}(t.data)}function a(t,e,n,i,s,o){var d=t.$_source;if(d){i[t.id]&&r(o,e,i,s),i[t.id]=!0;for(var l={},c=0;c<d.length;c++)if(!s[d[c]]){var _=e[d[c]],f=n[_._target];l[f.id]&&r(_,e,i,s),l[f.id]=!0,a(f,e,n,i,s,_)}i[t.id]=!1}}function r(t,e,a,r){t&&(gantt.callEvent("onExportCircularDependency",[t.id,t])&&delete e[t.id],delete a[t._source],delete a[t._target],r[t.id]=!0)}function n(t,e){var a,r,n={target:e[t.target],source:e[t.source]};if(n.target._lvl!=n.source._lvl){n.target._lvl<n.source._lvl?(a="source",r=n.target._lvl):(a="target",r=n.source._lvl);do{var i=e[n[a].parent];if(!i)break;n[a]=i}while(n[a]._lvl<r);for(var s=e[n.source.parent],o=e[n.target.parent];s&&o&&s.id!=o.id;)n.source=s,n.target=o,s=e[n.source.parent],o=e[n.target.parent]}t._target=n.target.id,t._source=n.source.id,n.target.$_target||(n.target.$_target=[]),n.target.$_target.push(t.id),n.source.$_source||(n.source.$_source=[]),n.source.$_source.push(t.id)}function i(t,e){for(var a in t)delete t[a]._target,delete t[a]._source;for(var r in e)delete e[r].$_source,delete e[r].$_target}function s(t,e){if(e&&e.project){for(var a in e.project)gantt.config.$custom_data||(gantt.config.$custom_data={}),gantt.config.$custom_data[a]="function"==typeof e.project[a]?e.project[a](gantt.config):e.project[a];delete e.project}}function o(t,e){e&&e.tasks&&(t.data.forEach(function(t){for(var a in e.tasks)t.$custom_data||(t.$custom_data={}),t.$custom_data[a]="function"==typeof e.tasks[a]?e.tasks[a](t,gantt.config):e.tasks[a]}),delete e.tasks)}function d(t,e){var a=e.name||"gantt.xml";delete e.name,gantt.config.custom=e;var r=gantt._getWorktimeSettings(),n=gantt.getSubtaskDates();if(n.start_date&&n.end_date){var i=gantt.templates.xml_format||gantt.templates.format_date;gantt.config.start_end={start_date:i(n.start_date),end_date:i(n.end_date)}}var s=void 0!==e.auto_scheduling&&!!e.auto_scheduling,o={callback:e.callback||null,config:gantt.config,data:t,manual:s,name:a,worktime:r};for(var d in e)o[d]=e[d];return o}function l(a){a._ms_export={},a.exportToMSProject=function(t){(t=t||{}).skip_circular_links=void 0===t.skip_circular_links||!!t.skip_circular_links;var a=this.templates.xml_format,r=this.templates.format_date;this.templates.xml_format=this.date.date_to_str("%d-%m-%Y %H:%i:%s"),this.templates.format_date=this.date.date_to_str("%d-%m-%Y %H:%i:%s");var n=this._serialize_all();s(0,t),o(n,t),t.skip_circular_links&&e(n),t=d(n,t),this._send_to_export(t,t.type||"msproject"),this.templates.xml_format=a,this.templates.format_date=r,this.config.$custom_data=null,this.config.custom=null},a.exportToPrimaveraP6=function(t){return t.type="primaveraP6",a.exportToMSProject(t)},a.importFromMSProject=function(e){var a=e.data;if(a instanceof FormData);else if(a instanceof File){var r=new FormData;r.append("file",a),e.data=r}!function(e){var a=e.server||t,r=e.store||0,n=e.data,i=e.callback,s={};e.durationUnit&&(s.durationUnit=e.durationUnit),e.projectProperties&&(s.projectProperties=e.projectProperties),e.taskProperties&&(s.taskProperties=e.taskProperties),n.append("type",e.type||"msproject-parse"),n.append("data",JSON.stringify(s)),r&&n.append("store",r);var o=new XMLHttpRequest;o.onreadystatechange=function(t){4==o.readyState&&0==o.status&&i&&i(null)},o.onload=function(){var t=null;if(!(o.status>400))try{t=JSON.parse(o.responseText)}catch(t){}i&&i(t)},o.open("POST",a,!0),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.send(n)}(e)},a.importFromPrimaveraP6=function(t){return t.type="primaveraP6-parse",a.importFromMSProject(t)}}l(gantt),window.Gantt&&Gantt.plugin&&Gantt.plugin(l)}();
/* eslint-enable */
